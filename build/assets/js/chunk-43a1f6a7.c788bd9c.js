(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43a1f6a7"],{"53b2":function(e,t,r){"use strict";r("163d");var a={data:function(){return{isMounted:!1,elementHeight:0}},computed:{minHeight:function(){if(this.isMounted)return void 0!==this.formShow?(this.$refs.formPublic&&(this.elementHeight=this.$refs.formPublic.offsetHeight),window.innerHeight-Number(this.formShow)*(this.elementHeight+10)-134+"px"):window.innerHeight-134+"px"}},mounted:function(){this.isMounted=!0},methods:{resize:function(){this.elementHeight="60px"}}};t["a"]=a},5490:function(e,t,r){"use strict";r("9a0e")("link",(function(e){return function(t){return e(this,"a","href",t)}}))},"6bec":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"uploadImg"},[r("el-upload",{class:{"upload-demo":!0,"can-add":!e.isShow},attrs:{action:"","http-request":e.upload,"on-remove":e.handleRemove,"before-upload":e.handleBeforeUpload,"list-type":"picture-card","file-list":e.fileList,limit:1}},[r("i",{staticClass:"el-icon-plus"})])],1)},i=[],n=(r("ed63"),r("8cf2"),{name:"uploadImg",data:function(){return{isShow:!0,fileList:[]}},props:{file:{type:Array,default:function(){return[]}}},created:function(){this.fileList=this.file.includes(null)?[]:this.file,this._hiddenPlus()},methods:{handleRemove:function(e,t){this.$emit("del-item",e.uid),this.fileList=[],this._hiddenPlus()},handleBeforeUpload:function(e){var t=/^image\/(jpeg|png|jpg|tiff)$/.test(e.type),r=e.size/1024/1024<2;return t||this.$message.error("请上传图片格式jpg/jpeg/png!"),r||this.$message.error("上传图片大小不能超过 2MB!"),t&&r},upload:function(e){this.fileList[0]=e.file,this.$emit("add-item",this.fileList),this._hiddenPlus()},_hiddenPlus:function(){1===this.fileList.filter((function(e){return Boolean(e)})).length?this.isShow=!1:this.isShow=!0}}}),o=n,l=r("5511"),s=Object(l["a"])(o,a,i,!1,null,null,null);t["a"]=s.exports},"9a0e":function(e,t,r){var a=r("e46b"),i=r("238a"),n=r("f6b4"),o=/"/g,l=function(e,t,r,a){var i=String(n(e)),l="<"+t;return""!==r&&(l+=" "+r+'="'+String(a).replace(o,"&quot;")+'"'),l+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(l),a(a.P+a.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",r)}},c5c1:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-collapse-transition",[e.formShow?r("div",{directives:[{name:"resize",rawName:"v-resize",value:e.resize,expression:"resize"}],ref:"formPublic",staticClass:"form-p"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryForm,inline:!0}},[r("el-form-item",{attrs:{label:"banner分类",prop:"type"}},[r("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"请选择分类",clearable:"",size:"small"},model:{value:e.queryForm.type,callback:function(t){e.$set(e.queryForm,"type",t)},expression:"queryForm.type"}},[r("el-option",{attrs:{label:"h5页面",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"进入店铺",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"进入分类",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"进入商品",value:"4"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"创建时间"}},[r("el-date-picker",{staticStyle:{width:"260px"},attrs:{size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1)],1):e._e()]),e._v(" "),r("div",{staticClass:"table-p",style:{"min-height":e.minHeight}},[r("el-row",{staticClass:"mb10 f-l",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.addBanner}},[e._v("新增")])],1)],1),e._v(" "),r("el-row",{staticClass:"mb10 f-r icon-wrap",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("div",{staticClass:"icon-box icon-box-f",on:{click:function(t){e.formShow=!e.formShow}}},[r("i",{directives:[{name:"show",rawName:"v-show",value:!e.formShow,expression:"!formShow"}],staticClass:"el-icon-zoom-in"}),e._v(" "),e.formShow?r("i",{staticClass:"el-icon-zoom-out"}):e._e()])]),e._v(" "),r("el-col",{attrs:{span:1.5}},[r("div",{staticClass:"icon-box icon-box-t",on:{click:e.handleQuery}},[r("i",{staticClass:"el-icon-refresh"})])])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.bannerList}},[r("el-table-column",{attrs:{label:"图片信息",prop:"usercode",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("div",{staticClass:"demo-image__preview img-box"},[r("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.imageurl,"preview-src-list":[e.row.imageurl]}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"类型",prop:"type",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("initType")(t.row.type)))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"允许登陆",prop:"accept",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("initAccept")(t.row.accept)))]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"对应编号",prop:"data",width:"120px"}}),e._v(" "),r("el-table-column",{attrs:{label:"连接地址",prop:"hyperlink"}}),e._v(" "),r("el-table-column",{attrs:{label:"创建日期",prop:"createtime",width:"150px"}}),e._v(" "),r("el-table-column",{attrs:{label:"排序",prop:"serial",width:"80px"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("修改")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDel(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryForm.pageNum,limit:e.queryForm.pageSize},on:{"update:page":function(t){return e.$set(e.queryForm,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryForm,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),r("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px"},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",staticClass:"mtb-15",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[e.imgShow?r("el-form-item",{ref:"uploadElement",attrs:{label:"图片上传",prop:"imageurl"}},[r("upload-img",{ref:"imgItemOne",attrs:{file:e.form.imageurl?[{uid:0,url:e.form.imageurl}]:[null]},on:{"add-item":e.addItemFir,"del-item":e.delItemFir},model:{value:e.form.imageurl,callback:function(t){e.$set(e.form,"imageurl",t)},expression:"form.imageurl"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"banner分类",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择banner分类"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-option",{attrs:{label:"h5页面",value:1}}),e._v(" "),r("el-option",{attrs:{label:"进入店铺",value:2}}),e._v(" "),r("el-option",{attrs:{label:"进入分类",value:3}}),e._v(" "),r("el-option",{attrs:{label:"进入商品",value:4}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"登陆方式",prop:"accept"}},[r("el-radio-group",{model:{value:e.form.accept,callback:function(t){e.$set(e.form,"accept",t)},expression:"form.accept"}},[r("el-radio",{attrs:{label:0}},[e._v("允许匿名登陆")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("登陆后进入")])],1)],1),e._v(" "),1===e.form.type?r("div",[r("el-form-item",{attrs:{label:"链接地址",prop:"hyperlink"}},[r("el-input",{attrs:{placeholder:"请输入连接地址"},model:{value:e.form.hyperlink,callback:function(t){e.$set(e.form,"hyperlink",t)},expression:"form.hyperlink"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"连接中参数",prop:"type"}},[r("el-radio-group",{model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}},[r("el-radio",{attrs:{label:0}},[e._v("无参数")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("有参数")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"渠道号",prop:"channel"}},[r("el-radio-group",{model:{value:e.form.channel,callback:function(t){e.$set(e.form,"channel",t)},expression:"form.channel"}},[r("el-radio",{attrs:{label:0}},[e._v("不传")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("传")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"sid及token",prop:"token"}},[r("el-radio-group",{model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}},[r("el-radio",{attrs:{label:0}},[e._v("不传")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("传")])],1)],1)],1):e._e(),e._v(" "),1!==e.form.type?r("el-form-item",{attrs:{label:e.initCode,prop:"data"}},[r("el-input",{attrs:{placeholder:"请输入"+e.initCode},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"serial"}},[r("el-input",{attrs:{placeholder:"请输入排序序号"},model:{value:e.form.serial,callback:function(t){e.$set(e.form,"serial",t)},expression:"form.serial"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{loading:e.loadingForm,type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},i=[],n=(r("5490"),r("63ff"),r("e5af")),o=r("9d37"),l=r("b775");function s(e){return Object(l["a"])({url:"/patronus/advertList",method:"post",data:e})}function c(e){return Object(l["a"])({url:"/patronus/delAdvert",method:"post",data:e})}function u(e){var t={formData:e,$_isFormData:!0};return Object(l["a"])({url:"/patronus/saveAdvert ",method:"post",data:t})}var p=r("6bec"),m=r("53b2"),d={mixins:[m["a"]],components:{UploadImg:p["a"]},data:function(){var e=function(e,t,r){""===t||/^(1|([1-9]\d{0,1})|100)$/.test(t)||r(new Error("请输入0-100之间的整数")),r()};return{loading:!1,loadingForm:!1,imgShow:!0,formShow:!0,bannerList:[],total:0,dateRange:[],title:"新增banner",open:!1,queryForm:{pageNum:1,pageSize:10,type:void 0},form:Object(o["a"])({uid:void 0,imageurl:null,type:1,link:0,channel:0,serial:"",token:0,accept:1,hyperlink:"",data:""},"accept",1),rules:{imageurl:[{required:!0,message:"上传图片不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择分类",trigger:"change"}],data:[{required:!0,message:"请输入对应编号",trigger:"blur"}],link:[{required:!0,message:"请选择",trigger:"change"}],channel:[{required:!0,message:"请选择",trigger:"change"}],token:[{required:!0,message:"请选择",trigger:"change"}],accept:[{required:!0,message:"请选择登陆方式",trigger:"change"}],serial:[{validator:e,trigger:"blur"}],hyperlink:[{required:!0,message:"请选输入连接地址",trigger:"blur"}]}}},filters:{initType:function(e){var t=["","h5页面","进入店铺","进入分类","进入商品"];return t[e]},initAccept:function(e){var t=["允许匿名进入","登陆后进入"];return t[e]}},computed:{initCode:function(){var e=this.form.type;return 2===e?"店铺编号":3===e?"分类编号":4===e?"商品编号":void 0}},created:function(){this.getList()},methods:{getList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,n,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,t=this._initParams,r=this.queryForm,e.next=5,s(t(r));case 5:a=e.sent,i=a.code,n=a.data,o=n.content,l=n.totalSize,this.loading=!1,200===i&&(this.bannerList=o,this.total=l),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),this.loading=!1,console.log(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}(),addItemFir:function(e){this.form.imageurl=e[0],this.$refs["uploadElement"].clearValidate()},delItemFir:function(e){this.form.imageurl=null},resetBannerForm:function(){Object.assign(this.form,Object(o["a"])({uid:void 0,imageurl:null,type:1,link:0,channel:0,serial:"",token:0,accept:0,hyperlink:"",data:""},"accept",1))},cancel:function(){this.open=!1},handleDel:function(e){var t=this;this.$confirm("确定要删除吗？","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"el-message-box-wran"}).then(Object(n["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c({uid:e.uid});case 3:a=r.sent,i=a.code,t.loading=!1,200===i&&(t.msgSuccess("删除成功"),t.getList()),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),t.loading=!1,console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))).catch((function(e){}))},addBanner:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.imgShow=!1,this.resetBannerForm(),this.title="新增banner",e.next=5,this.$nextTick();case 5:this.open=!0,this.imgShow=!0;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleEdit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.imgShow=!1,this.resetBannerForm(),this.title="修改banner",Object.assign(this.form,Object(o["a"])({uid:t.uid,imageurl:t.imageurl,type:t.type,link:t.link,channel:t.channel,serial:t.serial,token:t.token,accept:t.accept,hyperlink:t.hyperlink,data:t.data},"accept",t.accept)),e.next=6,this.$nextTick();case 6:this.open=!0,this.imgShow=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=12;break}a=new FormData,void 0!==t.form.uid&&a.append("uid",t.form.uid),a.append("imageurl",t.$refs.imgItemOne.fileList[0]),a.append("type",t.form.type),1===t.form.type?(a.append("channel",t.form.channel),a.append("token",t.form.token),a.append("link",t.form.link)):a.append("data",t.form.data),a.append("hyperlink",t.form.hyperlink),a.append("serial",t.form.serial),a.append("accept",t.form.accept),t.subData(a),e.next=13;break;case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},subData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loadingForm=!0,e.next=4,u(t);case 4:r=e.sent,a=r.code,this.loadingForm=!1,this.open=!1,200===a&&(this.msgSuccess("操作成功"),this.getList()),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),this.loadingForm=!1,console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}(),handleQuery:function(){this.queryForm.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},_initParams:function(e){var t=this.dateRange;return Object.assign(e,{beginTime:t.length>0?t[0]:null,endTime:t.length>0?t[1]:null}),e}}},f=d,h=r("5511"),g=Object(h["a"])(f,a,i,!1,null,null,null);t["default"]=g.exports}}]);